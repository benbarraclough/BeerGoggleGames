---
/**
 * DrinkMeta: header block for drink pages (title, excerpt, pills).
 * Props:
 *  title: string
 *  excerpt?: string
 *  drinkType: string
 *  difficulty?: string
 *  bases?: string[]
 *  tags?: string[]
 */
interface Props {
  title: string;
  excerpt?: string;
  drinkType: string;
  difficulty?: string;
  bases?: string[];
  tags?: string[];
}
const {
  title,
  excerpt,
  drinkType,
  difficulty,
  bases = [],
  tags = []
} = Astro.props as Props;

const prettyDiff = difficulty
  ? difficulty.charAt(0).toUpperCase() + difficulty.slice(1)
  : '';
---
<header class="drink-meta mb-6">
  <h1 class="font-display text-4xl mb-2">{title}</h1>
  {excerpt && (
    <p class="text-lg text-muted mb-4 leading-relaxed max-w-prose">{excerpt}</p>
  )}
  <div class="flex flex-wrap gap-2 meta-pills">
    {drinkType && (
      <span class="mode-pill" aria-label={`Drink type: ${drinkType}`}>{drinkType}</span>
    )}
    {bases.map(b => (
      <span class="mode-pill mode-pill-base" aria-label={`Base: ${b}`}>{b}</span>
    ))}
    {prettyDiff && (
      <span class="mode-pill mode-pill-diff" aria-label={`Difficulty: ${prettyDiff}`}>
        {prettyDiff}
      </span>
    )}
    {tags.map(t => (
      <span class="tag-pill" aria-label={`Tag: ${t}`}>{t}</span>
    ))}
    {tags.length > 0 && (
      <a href="/tags/" class="tag-pill" aria-label="Browse all tags">All Tags</a>
    )}
  </div>
</header>

<style>
  .mode-pill {
    @apply inline-flex items-center gap-1 px-3 py-1 rounded-md border border-fg/20 bg-fg/10 text-[11px] font-semibold tracking-wide uppercase leading-none;
  }
  .mode-pill-base {
    @apply bg-blue-500/15 text-blue-200 border-blue-400/30;
  }
  .mode-pill-diff {
    @apply bg-pink-500/15 text-pink-200 border-pink-400/30;
  }
  .tag-pill {
    @apply inline-flex items-center px-2 py-1 rounded-full bg-fg/10 text-[10px] font-medium border border-fg/15 hover:border-neon/50 transition;
  }
</style>
