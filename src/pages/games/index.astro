---
import { getCollection } from 'astro:content';
const games = (await getCollection('games')).sort((a,b)=> a.data.title.localeCompare(b.data.title));
const firstPage = games.slice(0,40);
const total = games.length;
const totalPages = Math.ceil(total / 40);
---
<html lang="en">
  <head><title>Games</title></head>
  <body>
    <h1>All Games</h1>
    <p>Total: {total} {totalPages>1 && `(Page 1 of ${totalPages} â€“ see pagination below)`}</p>
    <ul>
      {firstPage.map(g => <li><a href={`/games/${g.slug}/`}>{g.data.title}</a> <small>{g.data.type}</small></li>)}
    </ul>
    {totalPages>1 && <p>More pages: {Array.from({length: totalPages},(_,i)=> <a style="margin-right:.5rem;" href={`/games/page/${i+1}/`}>{i+1}</a>)}</p>}
    <p><a href="/games/types/">Browse by Type</a></p>
  </body>
</html>
