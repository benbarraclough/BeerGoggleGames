---
import Layout from '../../components/Layout.astro';
import { getCollection } from 'astro:content';
import { excludeLegacyNoise } from '../../lib/filters';

const all = excludeLegacyNoise(await getCollection('games'));
const types = Array.from(new Set(all.map(e => e.data.type || 'misc'))).sort();
const base = import.meta.env.BASE_URL || '/';
---
<Layout title="Games">
  <h1 class="font-display text-3xl mb-6">Game Types</h1>
  <ul class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
    {types.map(type => (
      <li class="border border-fg/20 p-4">
        <a class="font-semibold hover:text-neon" href={`${base}games/${type}`}>
          {type.charAt(0).toUpperCase()}{type.slice(1)} Games
        </a>
      </li>
    ))}
  </ul>
</Layout>
