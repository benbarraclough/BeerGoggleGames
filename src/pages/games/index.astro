---
import Layout from '../../components/Layout.astro';
import { getCollection } from 'astro:content';
const games = await getCollection('games');
const types = ['pong','dice','cup','card','coin','vocal','outdoor','misc'];
const base = import.meta.env.BASE_URL || '/';
---
<Layout title="Games">
  <h1 class="font-display text-3xl mb-4">Games</h1>
  <div class="mb-6 flex flex-wrap gap-2">
    {types.map(t => <a class="px-3 py-1 border border-fg/30 hover:border-neon" href={`${base}games/${t}`}>{t}</a>)}
  </div>
  <ul class="grid md:grid-cols-2 gap-4">
    {games.map(g => {
      const slug = (g.slug ?? g.id).split('/').pop();
      return (
        <li class="border border-fg/20 p-4">
          <a class="font-semibold hover:text-neon" href={`${base}games/${g.data.type}/${slug}`}>{g.data.title}</a>
          <div class="text-xs text-muted mt-1">{g.data.format}</div>
        </li>
      );
    })}
  </ul>
</Layout>