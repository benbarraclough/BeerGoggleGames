---
import Layout from '../../../components/Layout.astro';
import { getCollection } from 'astro:content';

const activities = await getCollection('activities').catch(() => []);
const sorted = activities.sort((a,b) => {
  const at = a.data.title?.toLowerCase() || '';
  const bt = b.data.title?.toLowerCase() || '';
  return at.localeCompare(bt);
});
const title = 'Activities';
const description = 'Party & drinking related activities.';
---
<Layout title={title} description={description}>
  <h1 class="font-display text-3xl mb-6">{title}</h1>
  {sorted.length === 0 ? (
    <p class="text-muted">No activities found.</p>
  ) : (
    <ul class="grid gap-4 sm:grid-cols-2 md:grid-cols-3 p-0 m-0 list-none">
      {sorted.map(a => {
        const url = `/extras/activities/${a.slug}/`;
        return (
          <li class="group border border-fg/15 rounded p-4 hover:border-neon transition-colors">
            <a href={url} class="flex flex-col gap-2 h-full">
              <span class="font-semibold group-hover:text-neon">{a.data.title}</span>
              {a.data.excerpt && <span class="text-xs text-muted leading-snug">{a.data.excerpt}</span>}
            </a>
          </li>
        );
      })}
    </ul>
  )}
</Layout>
