---
import Layout from '../../../components/Layout.astro';
import { getCollection } from 'astro:content';
import { excludeLegacyNoise } from '../../../lib/filters';

const items = excludeLegacyNoise(await getCollection('shots'))
  .sort((a,b) => (a.data.title || '').localeCompare(b.data.title || ''));
const base = import.meta.env.BASE_URL || '/';
---
<Layout title="Shot Recipes">
  <h1 class="font-display text-3xl mb-6">Shot Recipes</h1>
  <ul class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
    {items.map(p => {
      const slug = (p.slug ?? p.id).split('/').pop();
      return (
        <li class="border border-fg/20 p-4">
          <a class="font-semibold hover:text-neon" href={`${base}drinks/shot-recipes/${slug}`}>{p.data.title}</a>
          {p.data.tags?.length ? <div class="text-xs text-muted mt-2">{p.data.tags.join(' â€¢ ')}</div> : null}
        </li>
      );
    })}
  </ul>
</Layout>
